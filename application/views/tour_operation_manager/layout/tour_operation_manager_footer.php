



</div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
 

    <div class="float-right d-none d-sm-block">
      <!--<b>Version</b> 3.2.0-->
    </div>
    <center><strong>Copyright &copy; <?php echo date("Y"); ?>.</strong> All rights reserved.</center>
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->


<!-- jQuery -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/jquery-validation/jquery.validate.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/jquery-validation/additional-methods.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/summernote/summernote-bs4.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/codemirror/codemirror.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/codemirror/mode/css/css.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/codemirror/mode/xml/xml.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/codemirror/mode/htmlmixed/htmlmixed.js"></script>

<script src="<?php echo base_url(); ?>assets/admin/plugins/select2/js/select2.full.min.js"></script>
<!-- Bootstrap4 Duallistbox -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/bootstrap4-duallistbox/jquery.bootstrap-duallistbox.min.js"></script>
<!-- InputMask -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/moment/moment.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/inputmask/jquery.inputmask.min.js"></script>
<!-- date-range-picker -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/daterangepicker/daterangepicker.js"></script>
<!-- bootstrap color picker -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Bootstrap Switch -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/bootstrap-switch/js/bootstrap-switch.min.js"></script>
<!-- BS-Stepper -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/bs-stepper/js/bs-stepper.min.js"></script>
<!-- dropzonejs -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/dropzone/min/dropzone.min.js"></script>
<!-- AdminLTE App -->
<script src="<?php echo base_url(); ?>assets/admin/dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="<?php echo base_url(); ?>assets/admin/dist/js/demo.js"></script>

<!-- Page specific script -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/select2/js/select2.full.min.js"></script>

<!-- Summernote -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/summernote/summernote-bs4.min.js"></script>
<!-- CodeMirror -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/codemirror/codemirror.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/codemirror/mode/css/css.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/codemirror/mode/xml/xml.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/codemirror/mode/htmlmixed/htmlmixed.js"></script>


<!-- date-range-picker -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/daterangepicker/daterangepicker.js"></script>
<!-- bootstrap color picker -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Bootstrap Switch -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/bootstrap-switch/js/bootstrap-switch.min.js"></script>
<!-- BS-Stepper -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/bs-stepper/js/bs-stepper.min.js"></script>
<!-- dropzonejs -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/dropzone/min/dropzone.min.js"></script>



<script src="<?php echo base_url(); ?>assets/admin/plugins/bootstrap4-duallistbox/jquery.bootstrap-duallistbox.min.js"></script>
<!-- InputMask -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/moment/moment.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/inputmask/jquery.inputmask.min.js"></script>

<!-- DataTables  & Plugins -->
<script src="<?php echo base_url(); ?>assets/admin/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/jszip/jszip.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/pdfmake/pdfmake.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/pdfmake/vfs_fonts.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="<?php echo base_url(); ?>assets/admin/plugins/datatables-buttons/js/buttons.colVis.min.js"></script>

<script>
  $(function () {
    $("#example1").DataTable({
      "responsive": true, "lengthChange": false, "autoWidth": false,
      "buttons": ["copy", "csv", "excel", "pdf", "print", "colvis"]
    }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
    $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false,
      "responsive": true,
    });
  });
</script>

<!-- <script>
        $(document).on('click', '.newid', function(){  
        var button_id = $(this).attr("attr_hold");   
      //  $('#new_row'+button_id).remove();  
      alert(button_id);
      });
</script> -->

<!-- tour opration manager fotter -->

<!-- suggestion in that package type wise package name display dependency start -->
<script type='text/javascript'>
  // baseURL variable
  var baseURL= "<?php echo base_url();?>";
 
  $(document).ready(function(){
 
    // district change
    $('#package_type').change(function(){
      var did = $(this).val();
    //   alert(did); 
      // AJAX request
      $.ajax({
        url:'<?=base_url()?>tour_operation_manager/hotel_advance_payment/get_package',
        method: 'post',
        data: {did: did},
        dataType: 'json',
        success: function(response){
        console.log(response);
        
          $('#tour_number').find('option').not(':first').remove();
       
          $.each(response,function(index,data){       
             $('#tour_number').append('<option value="'+data['id']+'">'+data['tour_number']+' - '+data['tour_title']+'</option>');
          });
         
        }
     });
   });
 });
</script>

<script type='text/javascript'>
  // baseURL variable
  var baseURL= "<?php echo base_url();?>";
 
  $(document).ready(function(){
 
    // district change
    $('#tour_number').change(function(){
      var did = $(this).val();
    //   alert(did); 
      // AJAX request
      $.ajax({
        url:'<?=base_url()?>tour_operation_manager/hotel_advance_payment/get_hotel',
        method: 'post',
        data: {did: did},
        dataType: 'json',
        success: function(response){
        console.log(response);
        
          $('#hotel_name').find('option').not(':first').remove();
       
          $.each(response,function(index,data){       
             $('#hotel_name').append('<option value="'+data['id']+'">'+data['hotel_name']+'</option>');
          });
         
        }
     });
   });
 });
</script>
<!------ suggestion in that package type wise package name display dependency start ---->

<!-- jquery validation on add tour_operation_manager assign staff -->
<script>
$(document).ready(function () {

$('#add_assign_staff').validate({ // initialize the plugin
    errorPlacement: function($error, $element) {
    $error.appendTo($element.closest("div"));
  },
    rules: {
        package_type: {
            required: true,
        },
        tour_number: {
            required: true,
        },
        staff_name: {
            required: true,
        },
        mobile_number: {
            required: true,
        },
        email: {
            required: true,
        },
        gender: {
            required: true,
        },
        image_name: {
            required: true,
        },
        
    },

    messages :{
        package_type : {
            required : "Please Select package type",
        },
        tour_number : {
            required : "Please select tour name",
        },
        staff_name : {
            required : "Please enter staff name",
        },
        mobile_number : {
            required : "Please enter mobile number",
        },
        email : {
            required : "Please enter email",
        },
        gender : {
            required : "Please select gender",
        },
        image_name : {
            required : "Please upload image",
        },
    
    }
});

});

</script>

<script>
$(document).ready(function () {

$('#edit_assign_staff').validate({ // initialize the plugin
    errorPlacement: function($error, $element) {
    $error.appendTo($element.closest("div"));
  },
    rules: {
        package_type: {
            required: true,
        },
        tour_number: {
            required: true,
        },
        staff_name: {
            required: true,
        },
        mobile_number: {
            required: true,
        },
        email: {
            required: true,
        },
        gender: {
            required: true,
        },
        image_name: {
            required: true,
        },
        
    },

    messages :{
        package_type : {
            required : "Please Select package type",
        },
        tour_number : {
            required : "Please select tour name",
        },
        staff_name : {
            required : "Please enter staff name",
        },
        mobile_number : {
            required : "Please enter mobile number",
        },
        email : {
            required : "Please enter email",
        },
        gender : {
            required : "Please select gender",
        },
        image_name : {
            required : "Please upload image",
        },
    
    }
});

});

</script>
<!-- end jquery validation on add tour_operation_manager assign staff -->

<script type='text/javascript'>
  // baseURL variable
  var baseURL= "<?php echo base_url();?>";
 
  $(document).ready(function(){
 
    $(document).on("change","select", function () {

        var did = $(this).val();
        var select_type = $(this).attr('attr_name');
        var currentRow = $(this).closest(".row");
        // console.log(currentRow.find(".name"));
        // var col3=currentRow.find("td:eq(2)").text(); 
if(select_type=='role'){

      // AJAX request
      $.ajax({
        url:'<?=base_url()?>tour_operation_manager/assign_staff/getrolename', 
        method: 'post',
        data: {did: did},
        dataType: 'json',
        success: function(response){
        // console.log(response);
        
        //   $('.name').find('option').not(':first').remove();
        currentRow.find(".name").find('option').not(':first').remove();
       
        if(did!= '9'){
          $.each(response,function(index,data){             
            currentRow.find(".name").append('<option value="'+data['id']+'">'+data['supervision_name']+'</option>');
            //  $('.name').append('<option value="'+data['id']+'">'+data['supervision_name']+'</option>');
          });
        }
        else{
          $.each(response,function(index,data){             
            currentRow.find(".name").append('<option value="'+data['id']+'">'+data['vehicle_owner_name']+'</option>');
            //  $('.name').append('<option value="'+data['id']+'">'+data['supervision_name']+'</option>');
        });
        }
      }
     });
    }
   });
 });
 </script>

<script>

var i=1;
$('#add_more_staff').click(function() {
   // alert('hhhh');
        i++;
var structure = $(` <div class="row" id="new_row`+i+`">
                        <div class="col-md-5">
                        <div class="form-group">
                            <label>Select role </label>
                            <select class="select_css role_name" attr_name="role" name="role_name[]" id="role_name" required="required">
                            <option value="">select role</option>
                            <?php
                                foreach($role_type as $role_type_info){ 
                            ?>
                            <option value="<?php echo $role_type_info['id']; ?>"><?php echo $role_type_info['role_name']; ?></option>
                            <?php } ?>
                            
                            </select>
                        </div>
                        </div>

                        <div class="col-md-6">
                        <div class="form-group">
                            <label>Name </label>
                            <select class="select_css row_set1 name" attr_name="staff_name" name="name[]" id="name" required="required">
                            <option value="">select name</option>
                            
                            </select>
                        </div>
                        </div>

                        <div class="col-md-1 pt-4 d-flex justify-content-center align-self-center">
                            <div class="form-group">
                            <label></label>
                                <button type="button" name="remove" id="`+i+`" class="btn btn-danger btn_remove">X</button>
                            </div>
                        </div>

                        <input type="hidden" class="form-control" name="package_id[]" id="package_id" value="<?php echo $pid ?>">
                        <input type="hidden" class="form-control" name="package_date_id[]" id="package_date_id" value="<?php echo $id ?>">

                    </div>
              `);
$('#main_row').append(structure); 

});


$(document).on('click', '.btn_remove', function(){  
       var button_id = $(this).attr("id");   
       $('#new_row'+button_id+'').remove();  
  });

</script>


<!-- approve expenses -->

<script>  
 $(document).ready(function(){
  $(".approve").click(function() {   
    // alert('hii');
    var did = $('#expense_id').val();
    // alert(did);
          var attr_approve =$(this).attr('attr_approve');
        //    alert(attr_approve);

           
           if(attr_approve != '' && did != '')  
           {  
                $.ajax({  
                     url:"<?php echo base_url(); ?>tour_operation_manager/completed_tours/get_approve",  
                     method:"post",  
                     data:{attr_approve:attr_approve , did:did},  
                     dataType: 'json',
                     success:function(responce){ 
                      // alert('alert done');
                         if(responce = 'true')
                         {
                          console.log('now done'); 
                              // alert(responce);
                          // redirect($this->module_url_path.'agent/booking_enquiry/index');
                          window.location.href = "<?=base_url()?>tour_operation_manager/completed_tours/expenses/"+did;
                         }
                     }  
                });  
           } 
          }); 
      });  
 </script>

 <!-- reject expenses -->

<script>  
 $(document).ready(function(){
  $(".reject").click(function() {   
    // alert('hii');
    var did = $('#expense_id').val();
    // alert(did);
          var attr_reject =$(this).attr('attr_reject');
        //    alert(attr_reject);

           
           if(attr_reject != '' && did != '')  
           {  
                $.ajax({  
                     url:"<?php echo base_url(); ?>tour_operation_manager/completed_tours/get_reject",  
                     method:"post",  
                     data:{attr_reject:attr_reject , did:did},  
                     dataType: 'json',
                     success:function(responce){ 
                      // alert('alert done');
                         if(responce = 'true')
                         {
                          console.log('now done'); 
                              // alert(responce);
                          // redirect($this->module_url_path.'agent/booking_enquiry/index');
                          window.location.href = "<?=base_url()?>tour_operation_manager/completed_tours/expenses/"+did;
                         }
                     }  
                });  
           } 
          }); 
      });  
 </script>

 <!-- ---------change bus ajax ----------------------------------------------->
 <script type='text/javascript'>
  // baseURL variable
  var baseURL= "<?php echo base_url();?>";
 
  $(document).ready(function(){
 
    // district change
    $('#vehicle_owner_name').change(function(){
      var did = $(this).val();
      // var seat = $('#seat_no').val();
      // alert(seat); 
      // AJAX request
      $.ajax({
        url:'<?=base_url()?>tour_operation_manager/change_bus/get_change_bus',
        method: 'post',
        data: {did: did},
        dataType: 'json',
        success: function(response){
        console.log(response);
        // alert(response);
          $('#rto_no').find('option').not(':first').remove();
       
          $.each(response,function(index,data){       
             $('#rto_no').append('<option value="'+data['id']+'">'+data['registration_number']+'</option>');
          });
         
        }
     });
   });
 });
</script>
<!-- ---------change bus ajax --------------------------------------------->

<!-- ---------change bus seat capacity ajax ----------------------------------------------->
<script type='text/javascript'>
  // baseURL variable
  var baseURL= "<?php echo base_url();?>";
 
  $(document).ready(function(){
 
    // district change
    $('#rto_no').change(function(){
      var did = $(this).val();
      // var seat = $('#seat_no').val();
      // alert(did); 
      // AJAX request
      $.ajax({
        url:'<?=base_url()?>tour_operation_manager/change_bus/get_change_bus_seat',
        method: 'post',
        data: {did: did},
        dataType: 'json',
        success: function(response){
        console.log(response);
        // alert(response);
          $('#seat_capacity').find('option').not(':first').remove();
       
          $.each(response,function(index,data){       
            $('#seat_capacity').val(data['seat_capacity']);
          });
         
        }
     });
   });
 });
</script>
<!-- ---------change bus seat capacity ajax --------------------------------------------->